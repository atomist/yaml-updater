language: node_js
node_js:
- 8.3.0
branches:
  except:
  - "/\\+travis\\d+$/"
env:
  global:
  - secure: TXUsAlhsVGi1QW6eXqIoJHr6GTDhtopCLZS2BjDqrJvqJ1e8+45utKAGZXbuB/0yPslEhGlYYUPhY4sviOUI/dRSt+698QsPOuhawI9nmul2T3cO2b6dP65H9r5eEVgtskEjmwW76IRf9UhOWsPBW5zzEXuWYHLzmKQBX06R/j/O4VRGl+NW1QH7ep/dMickhoUgIOW8xO2tYnghInWBAqEblcBde/Bopzf5zDXOohUsVtst5VYIYMX1kIIDD2kiS1RufQZgx4w+RFhg3upA2nkge2A4Dr3I28ji4Sw9NmFddbDk44ZrHc/rER70zKhCecRBj689k2Zk+Z9RJlSiCS3tbq6GuW9+FbqXX/LCSnRmMcr1AS2n8kZ1AyiLhp3wohTYx5wMNqvkWDLG+5V+wTlAoWvunkvNY2b50YX3bDsG9hNOji3De7byYZ36+nYiRstY3AH/zjWf5tmIujwdT7tG/BhNPaY5ZJz2jAAbkV2X60UbUiRvSgMDaOGiVf1jpMi4+5Mj3NdSCfUPrUuQ+WWyzswgKz/byoLduZ1ptrjwXUeQ8LebxyeJ4my7z0sVyKbormQKZYy7SHgjPVghYbm2R/TeOI4qUuP0M4QI31rwIoOH15/z8k88eKBHSY6gjNxYkSC2r0oFxle7MovHa5KuxDCHdoL/Py4c8apLLRA=
  - secure: OzuxMF0X1cZvsMo+YzHCnQa9ypd3TKIlBteVYITl/QofssXUIQ1NaLiB2bYyFb5AF9l3VwmgueA9UTAO5HnI+Clms9sMaq7GL1vulFXaR5WnJgfDBiOIolN6MiCKDodLIYJRDjvIylyQXN9FRs/B1iDfSJHGjDJRo/g7i7LReepXi7+Q009DG0dhMuBCrC8PsT44gkFAjAEnlVjuTsIVhP7G+pw+GQSjFJsW/pwoUERKkqFsWyNUqr+pZnRmBuHEjyaZ8u45bnIT/aTPIHI5kR26blA5k1kwVnwrbJ2j6+YtKJootzpD7wtJCnMpto+CpYxYAFJkN+fb2dY5aNFoNAuyS8kulb4YVegAO5/aMfWxzhTb1+YVmhd0pj86ySh4L00nrNeMXcMqkMCMZkrdY9Wu630vdM3LRR1v0COkuahKnq29Q7UgxgAI15Rox+MGeGR669R9s7fYZpj3uWiVWwznzcWJSM0PuuCxEbAZYc0rUDsfZ+GrSMF0EMVLegM5ugf2+AnUFTFVxRHUr7/ohAxeFGDAo7Iw6yq7a8Iwj+tJqMcDQPfNFe1sVT+R3b2Twj49JpWFjzjAm/iO1nugQYw+239LPhjIT5/iD9lpvzQIc7BTRbxDpLj8SBns0qYFdmQSWdQMiphdYm9Y1wh152yX9BY80sIjWE5j/ZkVd7g=
script: bash travis-build.bash
notifications:
  email: false
  webhooks:
    urls:
    - https://webhook.atomist.com/travis
    on_success: always
    on_failure: always
    on_start: always
    on_cancel: always
    on_error: always
cache:
  directories:
  - "$HOME/.npm"
deploy:
  provider: releases
  api_key:
    secure: fZLZLAS85dpU91SSYQcNyomqDid0UtM48ug6B5/ScG9P78XYM/tiS4NdQHd6j1H+3iQYaU0c6aXO220/92dGpCOh7aZ4DN4+nsZ2mMd0Zq557saAd8R9kn/NgGLMolHp6Aj7aGFHmXSB57m+Ywvx1KIkBznL1JzGWVgZG9NZTxZbhPRVw5rM8aX3hx8dV2lKFZW0UHE8m/pdwW8hltn+WavZ53tiqhfCLDIT0qvlR274VqhXMBQBMgMRbijycsjLaiWN4aPSEjJ1C7/4yKzTaH93S4b9PBy+38s7TOGT5ND/N9aoepr1PxCRN5m4OdGvV2RgQyb++diLVPuxHm+Vv8t677cA/vP71RDSHhSQcPqPuuQR+TGd1kRaH2rRp/kg8mnZAkKtp0pgZXoPa885oaUUU7ieLr6DFGFr+gGOFh2C3vcgaodPoNcMGwfqHN1toL8lwohJzzAYCIYn1PEZc10IvWrgZdICC2XyLiqFejhkbP+B45edhewfh8h7w6QoXCfmcbe7C6o4hYb0lFqZlgK4mxQOv0Wv1zqkYxgifBAobHjnojNvc/f1ehGb54BeXWsJro4G87SjuxOopZAr6my3mZOjkLaLmdxfIGd5bH/gCYWIl004nTXUzdBm/NNp4hLx2f9qbCQGEEpKwpqHt/YIPJKegfRBnNokIQjrUX4=
  on:
    tags: true
    condition: "$TRAVIS_TAG =~ ^[0-9]+\\.[0-9]+\\.[0-9]+(-(m|rc)\\.[0-9]+)?$"
after_deploy:
- bash npm-publish.bash $TRAVIS_TAG slack-messages
